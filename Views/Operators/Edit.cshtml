@model PEMO_DATA_BANKING.Models.Operator

@{
    ViewBag.Title = "Edit";
}

<h2>Edit</h2>


@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()


    <!-- Edit Modal -->
    <div class="modal fade" id="editModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="editModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header primary">
                    <h1 class="modal-title fs-5 primary" id="editModalLabel">Edit Operator</h1>
                </div>
                <form action="@Url.Action("Edit")" method="post">
                    <div class="modal-body">
                        <label for="isCompany">Do you belong to a company?</label>
                        <div class="form-group mb-3">
                            <div class="form-check">
                                <input type="radio" class="form-check-input" id="editIsCompanyYes" name="isCompany" value="true" onclick="toggleEditCompanyField(true)">
                                <label class="form-check-label" for="editIsCompanyYes">Yes</label>
                            </div>
                            <div class="form-check">
                                <input type="radio" class="form-check-input" id="editIsCompanyNo" name="isCompany" value="false" onclick="toggleEditCompanyField(false)">
                                <label class="form-check-label" for="editIsCompanyNo">No</label>
                            </div>
                        </div>
                        <input type="hidden" id="editPersonId" name="Person_id" />
                        <div class="form-group mb-3" id="editFirstNameField">
                            <label for="editFirstName">First Name</label>
                            <input type="text" class="form-control" id="editFirstName" name="FirstName" placeholder="Enter First Name" required>
                        </div>
                        <div class="form-group mb-3" id="editMiddleNameField">
                            <label for="editMiddleName">Middle Name</label>
                            <input type="text" class="form-control" id="editMiddleName" name="MiddleName" placeholder="Enter Middle Name">
                        </div>
                        <div class="form-group mb-3" id="editLastNameField">
                            <label for="editLastName">Last Name</label>
                            <input type="text" class="form-control" id="editLastName" name="LastName" placeholder="Enter Last Name" required>
                        </div>
                        <div class="form-group mb-3" id="editCompanyNameField" style="display: none;">
                            <label for="editCompanyName">Company Name</label>
                            <input type="text" class="form-control" id="editCompanyName" name="Company_Name" placeholder="Enter Company Name">
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-primary">Save changes</button>
                    </div>
                    @Html.AntiForgeryToken()
                </form>
            </div>
        </div>
    </div>

}

<div>
    @Html.ActionLink("Back to List", "Index")
</div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")

    <script>
        function toggleCompanyField(isCompany) {
            const companyNameField = document.getElementById('companyNameField');
            const firstNameField = document.getElementById('firstNameField');
            const middleNameField = document.getElementById('middleNameField');
            const lastNameField = document.getElementById('lastNameField');
            const firstNameInput = document.getElementById('FirstName');
            const middleNameInput = document.getElementById('MiddleName');
            const lastNameInput = document.getElementById('LastName');

            if (isCompany) {
                companyNameField.style.display = 'block';
                firstNameField.style.display = 'none';
                middleNameField.style.display = 'none';
                lastNameField.style.display = 'none';
                firstNameInput.disabled = true;
                middleNameInput.disabled = true;
                lastNameInput.disabled = true;
            } else {
                companyNameField.style.display = 'none';
                firstNameField.style.display = 'block';
                middleNameField.style.display = 'block';
                lastNameField.style.display = 'block';
                firstNameInput.disabled = false;
                middleNameInput.disabled = false;
                lastNameInput.disabled = false;
            }
        }

        document.addEventListener('DOMContentLoaded', function () {
            const isCompanyYes = document.getElementById('isCompanyYes');
            const isCompanyNo = document.getElementById('isCompanyNo');

            isCompanyYes.addEventListener('change', function () {
                toggleCompanyField(true);
            });
            isCompanyNo.addEventListener('change', function () {
                toggleCompanyField(false);
            });

        });
             });

    </script>
}
